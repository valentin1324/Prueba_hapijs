/user-management 
‚îú‚îÄ‚îÄ /views         (Para las plantillas con Handlebars)
‚îú‚îÄ‚îÄ /public        (Para archivos est√°ticos: CSS, JS)
‚îú‚îÄ‚îÄ /routes        (Para las rutas de la API)
‚îú‚îÄ‚îÄ /models        (Para los esquemas de Mongoose)
‚îú‚îÄ‚îÄ /controllers   (Para manejar la l√≥gica de negocio)
‚îú‚îÄ‚îÄ .env           (Para configuraciones de entorno)
‚îú‚îÄ‚îÄ server.js      (Punto de entrada de la aplicaci√≥n)

controllers/userController.js
models/user.js
routes/userRoputes.js
views/layouts/default.hbs
views/users/edit.hbs
views/users/index.hbs
views/users/form.hbs
server.js











require('dotenv').config();
const Hapi = require('@hapi/hapi');
const mongoose = require('mongoose');
const path = require('path');
const handlebars = require('handlebars');
const { allowInsecurePrototypeAccess } = require('@handlebars/allow-prototype-access');
const routes = require('./routes/userRoutes');

// Registrar el helper 'extend' globalmente
handlebars.registerHelper('extend', function(name, context) {
  let blocks = this._blocks || (this._blocks = {});
  blocks[name] = context.fn(this);
  return null;
});

const init = async () => {
  // Conectar a MongoDB
  const mongoUri = process.env.MONGO_URI || 'mongodb://localhost:27017/miBaseDeDatos';
  try {
    await mongoose.connect(mongoUri);
    console.log('‚úÖ Conectado a MongoDB');
  } catch (err) {
    console.error('‚ùå Error al conectar a MongoDB:', err.message);
    process.exit(1); // Finaliza la aplicaci√≥n si no puede conectar a MongoDB
  }

  try {
    // Configurar servidor Hapi.js
    const server = Hapi.server({
      port: process.env.PORT || 3001,
      host: process.env.HOST || 'localhost',
      routes: {
        files: { relativeTo: path.join(__dirname, 'public') },
      },
    });

    // Registrar Hapi Vision para plantillas
    await server.register(require('@hapi/vision'));

    // Configuraci√≥n del motor de plantillas
    server.views({
      engines: {
        hbs: allowInsecurePrototypeAccess(handlebars),
      },
      path: path.join(__dirname, 'views'),
      layoutPath: path.join(__dirname, 'views/layouts'),
      layout: 'default',
    });

    // Registrar rutas
    server.route(routes);
    console.log('‚úÖ Rutas registradas correctamente');

    // Iniciar servidor
    await server.start();
    console.log(`üöÄ Servidor corriendo en ${server.info.uri}`);
  } catch (err) {
    console.error('‚ùå Error al iniciar el servidor:', err.message);
    process.exit(1); // Finaliza la aplicaci√≥n si no puede iniciar el servidor
  }
};

// Inicializar aplicaci√≥n
init().catch((err) => {
  console.error('‚ùå Error inesperado al inicializar la aplicaci√≥n:', err.message);
  process.exit(1); // Finaliza la aplicaci√≥n ante errores imprevistos
});
